% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/07_roc.R
\name{roc_indexes}
\alias{roc_indexes}
\title{批量 ROC 曲线分析、AUC 比较与最佳截断点输出}
\usage{
roc_indexes(
  data,
  outcome,
  index,
  index_combined = NULL,
  file = "ROC_curve.tiff",
  width = 2000,
  height = 2000,
  res = 300,
  DeLong = FALSE,
  DeLong_fp = "./DeLong_result.csv",
  cols = NULL,
  legend_map = NULL,
  seed = 123
)
}
\arguments{
\item{data}{\code{data.frame}，必须包含结局变量及所有待评估指标}

\item{outcome}{字符标量，二分类结局变量名（0/1）}

\item{index}{字符向量，单个连续指标名，将作为 ROC 的 predictor}

\item{index_combined}{命名列表，组合模型；如 \code{list(Combined = c("X1","X2"))}，
函数内部用 \code{glm(..., family = binomial)} 建模，
以预测概率作为 ROC 的 predictor}

\item{file}{输出 ROC 曲线 TIFF 文件名（含路径），默认 \code{"ROC_curve.tiff"}}

\item{width, height, res}{图形尺寸与分辨率（像素），默认 2000×2000×300 dpi}

\item{DeLong}{逻辑值，是否执行 DeLong 检验，默认 FALSE}

\item{DeLong_fp}{字符，DeLong 检验结果保存路径，默认 \code{"./DeLong_result.csv"}}

\item{cols}{自定义曲线颜色向量；NULL 时自动采样}

\item{legend_map}{命名向量，曲线图例别名，如 \code{c(PIV = "Systemic Inflammation Index")}}

\item{seed}{随机种子，确保颜色与 DeLong 抽样可复现，默认 123}
}
\value{
\if{html}{\out{<div class="sourceCode">}}\preformatted{              列表：
}\if{html}{\out{</div>}}

\describe{
\item{roc_list}{命名列表，各指标/组合的 \code{pROC} 对象}
\item{auc_summary}{数据框，AUC、95\%CI、最佳截断值、灵敏度、特异度}
}
同时把 ROC 图写入 TIFF/SVG，控制台打印最佳截断点信息（invisible）
}
\description{
对单个或多个连续指标（及自定义组合模型）一次性完成：
\itemize{
\item ROC 拟合、AUC 及 95\%CI 计算
\item 最佳截断值（Youden 指数）
\item 可选 DeLong 检验进行两两 AUC 比较
\item 自动绘制 ROC 曲线并保存 TIFF/SVG
\item 控制台打印灵敏度/特异度/截断值
}
}
\details{
\itemize{
\item 单个指标直接使用原始值；组合指标先拟合 logistic 再用预测概率
\item 最佳截断值采用 Youden 指数最大点；多解时取第一个
\item DeLong 检验使用 \code{pROC::roc.test(..., method = "delong")}，结果含差值及 CI
\item 图形设备为 TIFF + SVG 双输出，满足期刊矢量/位图要求
}
}
\examples{
\dontrun{
roc_indexes(mtcars, "vs", "mpg", file = tempfile(".tiff"))
}
}
