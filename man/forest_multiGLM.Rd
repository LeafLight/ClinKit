% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/05_forest.R
\name{forest_multiGLM}
\alias{forest_multiGLM}
\title{多亚组 GLM 森林图数据生成器，绘图结合forForest与forestPDF}
\usage{
forest_multiGLM(
  data,
  outcome,
  exposure,
  var_subgroups,
  var_cov = NULL,
  family = "binomial",
  decimal.estimate = 8,
  decimal.percent = 1,
  decimal.pvalue = 3,
  line = FALSE
)
}
\arguments{
\item{data}{\code{data.frame}，必须包含结局、暴露及所有亚组/协变量}

\item{outcome}{字符标量，结局变量名}

\item{exposure}{字符标量，暴露变量名（模型主效应）}

\item{var_subgroups}{字符向量，亚组变量名（函数在每个水平内单独拟合）}

\item{var_cov}{字符向量，额外协变量，默认 \code{NULL}}

\item{family}{广义线性模型族，默认 \code{"binomial"}；可改 \code{"gaussian"} 等}

\item{decimal.estimate}{效应量小数位，默认 8}

\item{decimal.percent}{百分比小数位，默认 1}

\item{decimal.pvalue}{P 值小数位，默认 3}

\item{line}{逻辑值，是否在亚组间画分隔线，默认 \code{FALSE}}
}
\value{
\if{html}{\out{<div class="sourceCode">}}\preformatted{            \code{data.frame}，含亚组、效应量、95\%CI、P 值、样本量等列，
                    可直接喂给 \code{forestploter::forest()} 绘图（见示例）
}\if{html}{\out{</div>}}
}
\description{
以指定暴露变量对结局进行广义线性模型拟合，并在多个亚组内分别计算效应量
（默认 OR）及 95\%CI、P 值、样本占比，最终返回可直接用于 \code{forestploter} 绘图的长数据框。
}
\details{
\itemize{
\item 依赖 \code{TableSubgroupMultiGLM} 完成亚组拟合；返回对象再经缺失值填充、数值化整理
\item 返回框已预留对齐空列，并保证百分比为数值型，方便后续绘图
\item 森林图绘制部分已注释，用户拿到结果后自行调用 \code{forestploter} 即可
}
}
\examples{
\dontrun{
forest_df <- forest_multiGLM(
  data           = mydata,
  outcome        = "death",
  exposure       = "SIRI",
  var_subgroups  = c("性别", "年龄组", "高血压"),
  var_cov        = c("age", "smoke"),
  family         = "binomial",
  decimal.estimate = 3,
  decimal.pvalue   = 3
)

# 绘图（需安装 forestploter）
library(forestploter)
forest(forest_df,
       est = 4, lower = 5, upper = 6,
       ci_column = 2, zero = 1,
       xlab = "Odds Ratio")
}

}
